{% extends 'base.html' %}
{% load static %}

{% block title %}Edit Attendee - {{ attendee.name }}{% endblock %}

{% block content %}
<div class="edit-container">
  <div class="edit-header">
    <h1>âœï¸ Edit Attendee</h1>
    <a href="{% url 'admin_dashboard' %}" class="btn btn-secondary">â† Back to Dashboard</a>
  </div>

  <div class="form-card">
    <form method="POST" action="{% url 'admin_attendee_edit' attendee.id %}">
      {% csrf_token %}
      
      <div class="form-group">
        <label for="name">ğŸ‘¤ Full Name *</label>
        <input 
          type="text" 
          id="name" 
          name="name" 
          value="{{ attendee.name }}" 
          required
          class="form-input"
        >
      </div>

      <div class="form-group">
        <label for="email">ğŸ“§ Email Address *</label>
        <input 
          type="email" 
          id="email" 
          name="email" 
          value="{{ attendee.email }}" 
          required
          class="form-input"
        >
      </div>

      <div class="form-group">
        <label for="phone">ğŸ“± Phone Number *</label>
        <input 
          type="text" 
          id="phone" 
          name="phone" 
          value="{{ attendee.phone }}" 
          required
          pattern="\d{10}"
          title="Phone number must be exactly 10 digits"
          class="form-input"
        >
        <small>Must be exactly 10 digits</small>
      </div>

      <div class="form-group">
        <label for="age">ğŸ‚ Age</label>
        <input 
          type="number" 
          id="age" 
          name="age" 
          value="{{ attendee.age }}" 
          min="1" 
          max="150"
          class="form-input"
        >
      </div>

      <div class="form-group">
        <label for="place">ğŸ“ Place</label>
        <input 
          type="text" 
          id="place" 
          name="place" 
          value="{{ attendee.place }}" 
          class="form-input"
        >
      </div>

      <div class="form-group">
        <label for="class_session">ğŸ“š Class Session</label>
        <select id="class_session" name="class_session" class="form-input">
          <option value="">-- Select Session --</option>
          {% for session in sessions %}
            <option value="{{ session.id }}" {% if attendee.class_session.id == session.id %}selected{% endif %}>
              {{ session.title }} - {{ session.teacher }}
            </option>
          {% endfor %}
        </select>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">ğŸ’¾ Save Changes</button>
        <a href="{% url 'admin_dashboard' %}" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>
</div>

<style>
.edit-container {
  max-width: 800px;
  margin: 2rem auto;
  padding: 2rem;
}

.edit-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
}

.edit-header h1 {
  color: #1f2937;
}

.form-card {
  background: white;
  padding: 2rem;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.form-group {
  margin-bottom: 1.5rem;
}

.form-group label {
  display: block;
  font-weight: 600;
  color: #374151;
  margin-bottom: 0.5rem;
  font-size: 0.95rem;
}

.form-group small {
  display: block;
  margin-top: 0.5rem;
  color: #6b7280;
  font-size: 0.85rem;
}

.form-input {
  width: 100%;
  padding: 0.75rem;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  font-size: 1rem;
  transition: border-color 0.3s;
}

.form-input:focus {
  outline: none;
  border-color: #667eea;
}

.form-actions {
  display: flex;
  gap: 1rem;
  margin-top: 2rem;
}

@media (max-width: 768px) {
  .edit-container {
    padding: 1rem;
  }

  .edit-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 1rem;
  }

  .form-actions {
    flex-direction: column;
  }
}
</style>
{% endblock %}
